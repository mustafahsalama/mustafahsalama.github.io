import React, { useState } from 'react';
import { Mail, Phone, Linkedin, Github, ExternalLink, ChevronLeft, ChevronRight, X } from 'lucide-react';

const Portfolio = () => {
  const [selectedProject, setSelectedProject] = useState(null);
  const [currentImageIndex, setCurrentImageIndex] = useState(0);

  const projects = [
    {
      id: 1,
      title: "SIRAJ STUDENT | سراج الطالب",
      shortDesc: "A full-featured application for managing Quran classes, tracking student progress, and automated scheduling.",
      fullDesc: "SIRAJ STUDENT is a comprehensive educational platform designed specifically for Quran classes. The application provides teachers and administrators with powerful tools to manage student attendance, track memorization progress, schedule classes, and generate detailed reports. Students can view their progress, upcoming classes, and receive notifications about their learning journey.",
      tags: ["Flutter", "Odoo Backend", "Hive", "BLoC"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/4A90E2/FFFFFF?text=SIRAJ+Home",
        "https://via.placeholder.com/400x800/7B68EE/FFFFFF?text=Student+Progress",
        "https://via.placeholder.com/400x800/50C878/FFFFFF?text=Schedule+View"
      ],
      features: [
        "Real-time student progress tracking",
        "Automated class scheduling",
        "Attendance management system",
        "Progress reports and analytics",
        "Push notifications for updates",
        "Offline data synchronization"
      ]
    },
    {
      id: 2,
      title: "CITY PROPERTIES",
      shortDesc: "The Tenant Mobile app allows real-time access to lease information via the internet.",
      fullDesc: "CITY PROPERTIES is a comprehensive property management solution for tenants. The app provides seamless access to all lease-related information, enabling tenants to manage their rental experience efficiently. Users can submit maintenance requests, view payment history, communicate with property managers, and access important documents—all from their mobile device.",
      tags: ["Flutter", "Java EE Backend", "Hive", "Shared Preferences", "Firebase", "Google Map", "BLoC"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/FF6B6B/FFFFFF?text=Property+Dashboard",
        "https://via.placeholder.com/400x800/4ECDC4/FFFFFF?text=Lease+Details",
        "https://via.placeholder.com/400x800/FFE66D/FFFFFF?text=Service+Requests"
      ],
      features: [
        "Real-time lease information access",
        "Service request management",
        "Payment tracking and history",
        "Document storage and sharing",
        "Property location on map",
        "Direct communication with management"
      ]
    },
    {
      id: 3,
      title: "AMLAKI",
      shortDesc: "Landlord application designed to replace your patchwork of property management solutions.",
      fullDesc: "AMLAKI is an all-in-one property management platform for landlords. The application consolidates all property management tasks into a single, cloud-based solution accessible from anywhere. Landlords can manage multiple properties, track rental income, monitor maintenance issues, communicate with tenants, and access important documents—all from their smartphone.",
      tags: ["Flutter", "Java EE Backend", "Hive", "Shared Preferences", "Firebase", "Google Map", "BLoC", "Chart"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/9B59B6/FFFFFF?text=Portfolio+Overview",
        "https://via.placeholder.com/400x800/E74C3C/FFFFFF?text=Property+Analytics",
        "https://via.placeholder.com/400x800/3498DB/FFFFFF?text=Tenant+Management"
      ],
      features: [
        "Multi-property management",
        "Financial tracking and reporting",
        "Maintenance request handling",
        "Tenant communication portal",
        "Document management system",
        "Analytics and insights dashboard"
      ]
    },
    {
      id: 4,
      title: "AMLAKI LEGAL AFFAIRS",
      shortDesc: "Application that displays lawyer tasks to be performed, allows adding tasks and manipulating existing tasks.",
      fullDesc: "AMLAKI LEGAL AFFAIRS is a specialized task management system for legal professionals working in property management. The app helps lawyers organize their caseload, track deadlines, manage court appearances, and coordinate with clients. It provides a streamlined workflow for handling legal matters related to real estate and property disputes.",
      tags: ["Flutter", "Java EE Backend", "Shared Preferences", "Firebase", "BLoC"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/2ECC71/FFFFFF?text=Task+Dashboard",
        "https://via.placeholder.com/400x800/F39C12/FFFFFF?text=Case+Details",
        "https://via.placeholder.com/400x800/C0392B/FFFFFF?text=Calendar+View"
      ],
      features: [
        "Task and case management",
        "Deadline tracking and reminders",
        "Document attachment system",
        "Client communication tools",
        "Court date calendar",
        "Case status updates"
      ]
    },
    {
      id: 5,
      title: "JOB VISIT",
      shortDesc: "Maintenance workflow application that helps technicians manage tasks and handle repairs efficiently.",
      fullDesc: "JOB VISIT is a field service management application designed for maintenance technicians. The app streamlines the entire maintenance workflow, from receiving work orders to completing tasks and updating job status. Technicians can access job details, view equipment history, capture photos, collect signatures, and submit reports—all while in the field.",
      tags: ["Flutter", "SQLite", "BLoC", "Shared Preferences", "Java EE"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/16A085/FFFFFF?text=Work+Orders",
        "https://via.placeholder.com/400x800/D35400/FFFFFF?text=Job+Details",
        "https://via.placeholder.com/400x800/8E44AD/FFFFFF?text=Completion+Report"
      ],
      features: [
        "Work order management",
        "Equipment history tracking",
        "Photo documentation",
        "Digital signature capture",
        "Offline functionality",
        "Real-time status updates"
      ]
    },
    {
      id: 6,
      title: "Rabeh Saudi Sudanese Bank",
      shortDesc: "Mobile banking solution enabling users to manage accounts, perform transactions, and access digital services securely.",
      fullDesc: "Rabeh Bank Mobile App is a comprehensive mobile banking solution that brings modern banking services to users' fingertips. The app provides secure access to account information, enables various types of transactions, and offers additional financial services. Built with security and user experience as top priorities, the app supports both Arabic and English languages.",
      tags: ["Flutter", "Java Backend", "Provider", "Shared Preferences", "SQLite"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/27AE60/FFFFFF?text=Account+Dashboard",
        "https://via.placeholder.com/400x800/2980B9/FFFFFF?text=Transactions",
        "https://via.placeholder.com/400x800/8B4513/FFFFFF?text=Services"
      ],
      features: [
        "Account balance and transactions",
        "Fund transfers and payments",
        "Bill payment services",
        "Transaction history",
        "Security features (PIN, biometric)",
        "Multi-language support"
      ]
    },
    {
      id: 7,
      title: "ElNILEIN INSURANCE APP",
      shortDesc: "Nilein Insurance's medical network application",
      fullDesc: "ElNILEIN INSURANCE APP is a healthcare network application that connects insurance customers with medical service providers. Users can search for hospitals, clinics, and doctors within their insurance network, view coverage details, submit claims, and track their medical expenses. The app simplifies the healthcare experience for insured members.",
      tags: ["Flutter", "Hive", "Shared Preferences", "BLoC", "Dot Net Backend"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/E67E22/FFFFFF?text=Provider+Search",
        "https://via.placeholder.com/400x800/1ABC9C/FFFFFF?text=Coverage+Details",
        "https://via.placeholder.com/400x800/95A5A6/FFFFFF?text=Claims+Tracking"
      ],
      features: [
        "Medical provider directory",
        "Coverage information",
        "Claims submission",
        "Claims tracking system",
        "Emergency contact numbers",
        "Health card access"
      ]
    },
    {
      id: 8,
      title: "TASHEEL APP",
      shortDesc: "Educational mobile application designed to help students practice and assess their knowledge across various school subjects.",
      fullDesc: "TASHEEL is an innovative educational platform that transforms learning into an engaging experience. The app offers interactive quizzes across multiple subjects, providing students with instant feedback and detailed explanations. With progress tracking, performance analytics, and adaptive difficulty levels, TASHEEL helps students identify their strengths and areas for improvement.",
      tags: ["Flutter", "Firebase", "BLoC", "Shared Preferences"],
      playStore: "#",
      appStore: "#",
      images: [
        "https://via.placeholder.com/400x800/3498DB/FFFFFF?text=Subject+Selection",
        "https://via.placeholder.com/400x800/E74C3C/FFFFFF?text=Quiz+Interface",
        "https://via.placeholder.com/400x800/2ECC71/FFFFFF?text=Progress+Report"
      ],
      features: [
        "Interactive quizzes",
        "Multiple subject coverage",
        "Instant score evaluation",
        "Progress tracking",
        "Performance analytics",
        "Study recommendations"
      ]
    }
  ];

  const ProjectCard = ({ project }) => (
    <div 
      onClick={() => {
        setSelectedProject(project);
        setCurrentImageIndex(0);
      }}
      className="bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-shadow cursor-pointer border border-gray-200"
    >
      <h3 className="text-xl font-bold text-gray-800 mb-3">{project.title}</h3>
      <p className="text-gray-600 mb-4 text-sm leading-relaxed">{project.shortDesc}</p>
      
      <div className="flex flex-wrap gap-2 mb-4">
        {project.tags.map((tag, idx) => (
          <span key={idx} className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium">
            {tag}
          </span>
        ))}
      </div>
      
      <div className="flex gap-3">
        {project.playStore && (
          <a href={project.playStore} className="text-green-600 hover:text-green-700 text-sm font-medium flex items-center gap-1">
            <ExternalLink size={14} /> Google Play
          </a>
        )}
        {project.appStore && (
          <a href={project.appStore} className="text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1">
            <ExternalLink size={14} /> App Store
          </a>
        )}
      </div>
    </div>
  );

  const ProjectDetail = ({ project }) => {
    const nextImage = () => {
      setCurrentImageIndex((prev) => (prev + 1) % project.images.length);
    };

    const prevImage = () => {
      setCurrentImageIndex((prev) => (prev - 1 + project.images.length) % project.images.length);
    };

    return (
      <div className="fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto">
        <div className="min-h-screen px-4 py-8">
          <div className="max-w-4xl mx-auto bg-white rounded-lg shadow-2xl">
            <div className="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-lg z-10">
              <h2 className="text-2xl font-bold text-gray-800">{project.title}</h2>
              <button
                onClick={() => setSelectedProject(null)}
                className="p-2 hover:bg-gray-100 rounded-full transition-colors"
              >
                <X size={24} />
              </button>
            </div>

            <div className="p-6">
              <div className="relative mb-6 bg-gray-100 rounded-lg overflow-hidden">
                <img
                  src={project.images[currentImageIndex]}
                  alt={`${project.title} screenshot ${currentImageIndex + 1}`}
                  className="w-full h-96 object-contain"
                />
                
                {project.images.length > 1 && (
                  <>
                    <button
                      onClick={prevImage}
                      className="absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all"
                    >
                      <ChevronLeft size={24} />
                    </button>
                    <button
                      onClick={nextImage}
                      className="absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all"
                    >
                      <ChevronRight size={24} />
                    </button>
                    <div className="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
                      {project.images.map((_, idx) => (
                        <button
                          key={idx}
                          onClick={() => setCurrentImageIndex(idx)}
                          className={`w-2 h-2 rounded-full transition-all ${
                            idx === currentImageIndex ? 'bg-white w-8' : 'bg-white bg-opacity-50'
                          }`}
                        />
                      ))}
                    </div>
                  </>
                )}
              </div>

              <div className="mb-6">
                <h3 className="text-lg font-semibold text-gray-800 mb-3">About This Project</h3>
                <p className="text-gray-600 leading-relaxed">{project.fullDesc}</p>
              </div>

              <div className="mb-6">
                <h3 className="text-lg font-semibold text-gray-800 mb-3">Key Features</h3>
                <ul className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  {project.features.map((feature, idx) => (
                    <li key={idx} className="flex items-start gap-2 text-gray-600">
                      <span className="text-blue-600 mt-1">•</span>
                      <span>{feature}</span>
                    </li>
                  ))}
                </ul>
              </div>

              <div className="mb-6">
                <h3 className="text-lg font-semibold text-gray-800 mb-3">Technologies Used</h3>
                <div className="flex flex-wrap gap-2">
                  {project.tags.map((tag, idx) => (
                    <span key={idx} className="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium">
                      {tag}
                    </span>
                  ))}
                </div>
              </div>

              <div className="flex gap-4 pt-4 border-t border-gray-200">
                {project.playStore && (
                  <a
                    href={project.playStore}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex-1 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium text-center transition-colors flex items-center justify-center gap-2"
                  >
                    <ExternalLink size={18} /> View on Google Play
                  </a>
                )}
                {project.appStore && (
                  <a
                    href={project.appStore}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium text-center transition-colors flex items-center justify-center gap-2"
                  >
                    <ExternalLink size={18} /> View on App Store
                  </a>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
      <header className="bg-white shadow-md sticky top-0 z-40">
        <div className="max-w-6xl mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-2xl font-bold text-gray-800">Mustafa Hisham Salama</h1>
              <p className="text-gray-600">Flutter Developer | Mobile App Developer</p>
            </div>
          </div>
        </div>
      </header>

      <main className="max-w-6xl mx-auto px-4 py-8">
        <section className="mb-12">
          <div className="bg-white rounded-lg shadow-md p-8">
            <h2 className="text-3xl font-bold text-gray-800 mb-4">About Me</h2>
            <p className="text-gray-600 leading-relaxed">
              Passionate and results-driven Flutter Developer with 5+ years of experience in building high-performance mobile applications for both iOS and Android. Skilled in delivering seamless user experiences and writing clean, scalable code using Flutter and Dart. Experienced in integrating REST APIs, applying robust state management solutions, and following industry best practices.
            </p>
          </div>
        </section>

        <section className="mb-12">
          <h2 className="text-3xl font-bold text-gray-800 mb-6">Featured Projects</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {projects.map(project => (
              <ProjectCard key={project.id} project={project} />
            ))}
          </div>
        </section>

        <section className="mb-12">
          <div className="bg-white rounded-lg shadow-md p-8">
            <h2 className="text-3xl font-bold text-gray-800 mb-6">Contact</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <a href="mailto:mustafahishamsalama@gmail.com" className="flex items-center gap-3 text-gray-700 hover:text-blue-600 transition-colors">
                <Mail size={20} />
                <span>mustafahishamsalama@gmail.com</span>
              </a>
              <a href="tel:+971543408018" className="flex items-center gap-3 text-gray-700 hover:text-blue-600 transition-colors">
                <Phone size={20} />
                <span>+971561102484</span>
              </a>
              <a href="https://linkedin.com/in/mustafa-salama" target="_blank" rel="noopener noreferrer" className="flex items-center gap-3 text-gray-700 hover:text-blue-600 transition-colors">
                <Linkedin size={20} />
                <span>linkedin.com/in/mustafa-salama</span>
              </a>
              <a href="https://github.com/mustafahsalama" target="_blank" rel="noopener noreferrer" className="flex items-center gap-3 text-gray-700 hover:text-blue-600 transition-colors">
                <Github size={20} />
                <span>github.com/mustafahsalama</span>
              </a>
            </div>
          </div>
        </section>
      </main>

      {selectedProject && <ProjectDetail project={selectedProject} />}
    </div>
  );
};

export default Portfolio;
